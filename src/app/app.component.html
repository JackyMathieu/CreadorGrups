<div class="min-h-screen container mx-auto p-4 sm:p-6 lg:p-8">
  <header class="text-center mb-8">
    <h1
      class="text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-teal-400 mb-2"
    >
      Creador de Grups
    </h1>
    <p class="text-lg text-slate-500 dark:text-slate-400">
      Crea grups equilibrats donada una llista d'alumnes.
    </p>
  </header>

  <!-- Add/Edit Person Section -->
  @if (isAddPersonSectionVisible()) {
  <section
    class="mb-8 p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-md border border-slate-200 dark:border-slate-700 max-w-4xl mx-auto"
  >
    <h2 class="text-2xl font-bold mb-6 text-slate-700 dark:text-slate-300">
      {{ isEditing() ? "Editar " + name() : "Afegir Nou Alumne" }}
    </h2>
    <form
      (submit)="$event.preventDefault(); addOrUpdatePerson()"
      class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"
    >
      <div class="md:col-span-2">
        <label
          for="name"
          class="block mb-2 text-sm font-medium text-slate-600 dark:text-slate-300"
          >Nom</label
        >
        <input
          id="name"
          type="text"
          placeholder="Introdueix el nom de l'alumne"
          [value]="name()"
          (input)="name.set($any($event.target).value)"
          class="w-full px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition"
        />
      </div>

      <div>
        <label
          class="block mb-2 text-sm font-medium text-slate-600 dark:text-slate-300"
          >Sexe</label
        >
        <div
          class="flex items-center gap-4 p-2 bg-slate-50 dark:bg-slate-700 rounded-lg"
        >
          <label class="flex items-center gap-2 cursor-pointer white">
            <input
              type="radio"
              name="sex"
              value="boy"
              [checked]="sex() === 'boy'"
              (change)="sex.set('boy')"
              class="text-blue-600 focus:ring-blue-500"
            />
            Masculí
          </label>
          <label class="flex items-center gap-2 cursor-pointer white">
            <input
              type="radio"
              name="sex"
              value="girl"
              [checked]="sex() === 'girl'"
              (change)="sex.set('girl')"
              class="text-pink-600 focus:ring-pink-500"
            />
            Femení
          </label>
        </div>
      </div>

      <div>
        <label
          class="block mb-2 text-sm font-medium text-slate-600 dark:text-slate-300"
          >Nivell d'Aprenentatge</label
        >
        <div
          class="flex items-center gap-4 p-2 bg-slate-50 dark:bg-slate-700 rounded-lg"
        >
          @for (level of knowledgeLevels; track level) {
          <label class="flex items-center gap-1 cursor-pointer white">
            <input
              type="radio"
              name="knowledge"
              [value]="level"
              [checked]="knowledgeLevel() === level"
              (change)="knowledgeLevel.set(level)"
              class="text-teal-600 focus:ring-teal-500"
            />
            {{ level }}
          </label>
          }
        </div>
      </div>

      <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
        <label
          class="flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg cursor-pointer white"
        >
          <input
            type="checkbox"
            [checked]="isSpecial()"
            (change)="isSpecial.set($any($event.target).checked)"
            class="h-5 w-5 rounded text-yellow-500 focus:ring-yellow-400"
          />
          <span>NEE</span>
        </label>
        <label
          class="flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg cursor-pointer white"
        >
          <input
            type="checkbox"
            [checked]="hasActitudinalProblems()"
            (change)="hasActitudinalProblems.set($any($event.target).checked)"
            class="h-5 w-5 rounded text-red-500 focus:ring-red-400"
          />
          <span>Problemes Actitudinals</span>
        </label>
      </div>

      <div class="md:col-span-2">
        <label
          for="companions"
          class="block mb-2 text-sm font-medium text-slate-600 dark:text-slate-300"
          >Companys Preferits (separats per comes)</label
        >
        <input
          id="companions"
          type="text"
          placeholder="David, Anna, Gemma..."
          [value]="preferredCompanions()"
          (input)="preferredCompanions.set($any($event.target).value)"
          class="w-full px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition"
        />
      </div>

      <div class="md:col-span-2 flex justify-end items-center gap-4 mt-2">
        @if (isEditing()) {
        <button
          type="button"
          (click)="cancelEdit()"
          class="px-6 py-2 bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold rounded-full hover:bg-slate-300 dark:hover:bg-slate-500 focus:outline-none focus:ring-4 focus:ring-slate-300 dark:focus:ring-slate-700 transition-all duration-300 ease-in-out"
        >
          Cancelar
        </button>
        }
        <button
          type="submit"
          class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 transition-all duration-300 ease-in-out transform hover:scale-105 shadow"
        >
          {{ isEditing() ? "Actualitzar Alumne" : "Afegir Alumne" }}
        </button>
      </div>
    </form>
  </section>
  } @if (sortingError()) {
  <div
    class="max-w-4xl mx-auto mb-6 p-4 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 rounded-lg shadow-md"
  >
    <div class="flex items-start">
      <div class="flex-shrink-0">
        <svg
          class="h-5 w-5 text-red-400"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          aria-hidden="true"
        >
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <div class="ml-3">
        <p class="text-sm font-medium">{{ sortingError() }}</p>
      </div>
    </div>
  </div>
  }

  <main class="max-w-7xl mx-auto">
    @if (!isSorted()) {
    <div>
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-slate-700 dark:text-slate-300">
          Total d'alumnes: {{ people().length }}
        </h2>
        <button
          (click)="sortPeople()"
          [disabled]="people().length < 2"
          class="px-6 py-2 bg-teal-500 text-white font-semibold rounded-full hover:bg-teal-600 focus:outline-none focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800 disabled:bg-slate-400 disabled:cursor-not-allowed transition-all duration-300 ease-in-out shadow transform hover:scale-105"
        >
          Crear Grups
        </button>
      </div>
      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"
      >
        @for (person of people(); track person.id) {
        <div
          class="relative p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 transition-all duration-300"
          [class.ring-2]="editingPersonId() === person.id"
          [class.ring-blue-500]="editingPersonId() === person.id"
        >
          <div class="flex justify-between items-start">
            <h3
              class="font-bold text-lg mb-2"
              [class.text-blue-500]="person.sex === 'boy'"
              [class.text-pink-500]="person.sex === 'girl'"
            >
              {{ person.name }}
            </h3>
            <div
              class="flex items-center gap-2 text-slate-400 dark:text-slate-500"
            >
              @if (person.isSpecial) {
              <span
                title="Has special needs"
                class="w-6 h-6 flex items-center justify-center bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400 rounded-full text-xs font-bold"
                >NEE</span
              >
              } @if (person.hasActitudinalProblems) {
              <span
                title="Has actitudinal problems"
                class="w-6 h-6 flex items-center justify-center bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full text-xs font-bold"
                >PA</span
              >
              }
            </div>
          </div>
          <p class="text-sm text-slate-500 dark:text-slate-400">
            Aprenentatge: {{ person.knowledgeLevel }}
          </p>
          <p class="text-sm text-slate-500 dark:text-slate-400">
            Companys: {{ person.preferredCompanions.join(", ") || "None" }}
          </p>

          <div
            class="absolute top-2 right-2 flex gap-1 opacity-20 hover:opacity-100 transition-opacity"
          >
            <button
              (click)="startEdit(person)"
              title="Edit {{ person.name }}"
              class="p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700"
            >
              <svg
                class="w-5 h-5 text-slate-500"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L16.732 3.732z"
                ></path>
              </svg>
            </button>
            <button
              (click)="deletePerson(person.id)"
              title="Delete {{ person.name }}"
              class="p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700"
            >
              <svg
                class="w-5 h-5 text-red-500"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                ></path>
              </svg>
            </button>
          </div>
        </div>
        }
      </div>
    </div>
    } @else {
    <div>
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-slate-700 dark:text-slate-300">
          Grups Creats
        </h2>
        <button
          (click)="reset()"
          class="px-6 py-2 bg-slate-500 text-white font-semibold rounded-full hover:bg-slate-600 focus:outline-none focus:ring-4 focus:ring-slate-300 dark:focus:ring-slate-700 transition-all duration-300 ease-in-out shadow"
        >
          Tornar
        </button>
      </div>

      @if (sortingSummary(); as summary) {
      <section
        class="mb-8 p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-md border border-slate-200 dark:border-slate-700"
      >
        <h3 class="text-2xl font-bold mb-4 text-slate-700 dark:text-slate-300">
          Resum de l'equilibri entre grups
        </h3>
        <div class="overflow-x-auto">
          <table
            class="w-full text-sm text-left text-slate-500 dark:text-slate-400"
          >
            <thead
              class="text-xs text-slate-700 uppercase bg-slate-50 dark:bg-slate-700 dark:text-slate-300"
            >
              <tr>
                <th scope="col" class="px-6 py-3">Mètrica</th>
                <th scope="col" class="px-6 py-3 text-center">Grup 1</th>
                <th scope="col" class="px-6 py-3 text-center">Grup 2</th>
                <th scope="col" class="px-6 py-3 text-center">Diferència</th>
              </tr>
            </thead>
            <tbody>
              <tr
                class="bg-white border-b dark:bg-slate-800 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Total Alumnes
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.people.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.people.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.people.balance }}
                </td>
              </tr>
              <tr
                class="bg-slate-50 border-b dark:bg-slate-900/50 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Nens
                </th>
                <td class="px-6 py-4 text-center">{{ summary.boys.group1 }}</td>
                <td class="px-6 py-4 text-center">{{ summary.boys.group2 }}</td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.boys.balance }}
                </td>
              </tr>
              <tr
                class="bg-white border-b dark:bg-slate-800 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Nenes
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.girls.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.girls.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.girls.balance }}
                </td>
              </tr>
              <tr
                class="bg-slate-50 border-b dark:bg-slate-900/50 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  NEE
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.specialNeeds.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.specialNeeds.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.specialNeeds.balance }}
                </td>
              </tr>
              <tr
                class="bg-white border-b dark:bg-slate-800 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Problemes Actitudinals
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.actitudinalProblems.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.actitudinalProblems.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.actitudinalProblems.balance }}
                </td>
              </tr>
              <tr
                class="bg-slate-50 border-b dark:bg-slate-900/50 dark:border-slate-700"
              >
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Nivell Total d'Aprenentatge
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.knowledgeSum.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.knowledgeSum.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.knowledgeSum.balance }}
                </td>
              </tr>
              <tr class="bg-white dark:bg-slate-800">
                <th
                  scope="row"
                  class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap dark:text-white"
                >
                  Preferències de companys resoltes
                </th>
                <td class="px-6 py-4 text-center">
                  {{ summary.metPreferences.group1 }}
                </td>
                <td class="px-6 py-4 text-center">
                  {{ summary.metPreferences.group2 }}
                </td>
                <td class="px-6 py-4 text-center font-bold">
                  {{ summary.metPreferences.balance }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        @if (sortingNotes().length > 0) {
        <div
          class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-700 rounded-lg"
        >
          <ul
            class="list-disc list-inside space-y-1 text-sm text-blue-700 dark:text-blue-300"
          >
            @for (note of sortingNotes(); track note) {
            @if(note.includes('ALERTA')) {
            <li class="danger">{{ note }}</li>
            }@else {
            <li class="warning">{{ note }}</li>
            } }
          </ul>
        </div>
        }
      </section>
      }

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Group 1 -->
        <div
          class="bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border border-slate-200 dark:border-slate-700"
        >
          <h3
            class="text-xl font-bold mb-4 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-600 dark:text-slate-300"
          >
            Grup 1 ({{ group1().length }})
          </h3>
          <div
            class="space-y-3 min-h-[100px] rounded-lg transition-colors duration-300"
          >
            @for (person of group1(); track person.id; let i = $index) {
            <div
              class="p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700 cursor-grab"
            >
              <div class="flex justify-between items-start">
                <p
                  class="font-semibold"
                  [class.text-blue-500]="person.sex === 'boy'"
                  [class.text-pink-500]="person.sex === 'girl'"
                >
                  {{ person.name }}
                </p>
                <div
                  class="flex items-center gap-2 text-slate-400 dark:text-slate-500"
                >
                  @if (person.isSpecial) {
                  <span
                    title="Has special needs"
                    class="w-5 h-5 flex items-center justify-center bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400 rounded-full text-xs font-bold"
                    >NEE</span
                  >
                  } @if (person.hasActitudinalProblems) {
                  <span
                    title="Has actitudinal problems"
                    class="w-5 h-5 flex items-center justify-center bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full text-xs font-bold"
                    >PA</span
                  >
                  }
                </div>
              </div>
              <div
                class="flex items-center gap-2 mt-1 text-xs text-slate-500 dark:text-slate-400"
              >
                <span>Aprenentatge:</span>
                <div class="flex items-center gap-0.5">
                  @for (lvl of knowledgeLevels; track lvl) {
                  <div
                    class="w-2.5 h-2.5 rounded-full"
                    [class.bg-teal-400]="lvl <= person.knowledgeLevel"
                    [class.bg-slate-300]="lvl > person.knowledgeLevel"
                    [class.dark:bg-teal-600]="lvl <= person.knowledgeLevel"
                    [class.dark:bg-slate-600]="lvl > person.knowledgeLevel"
                  ></div>
                  }
                </div>
              </div>
              <p
                class="text-xs text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-1.5"
              >
                @if (unmetPreferencesInGroup1().has(person.id)) {
                <svg
                  class="w-4 h-4 text-amber-500 flex-shrink-0"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-amber-600 dark:text-amber-400"
                  >Companys:</span
                >
                } @else {
                <span>Companys:</span>
                }
                <span
                  class="font-medium text-slate-600 dark:text-slate-300"
                  [class.text-amber-600]="
                    unmetPreferencesInGroup1().has(person.id)
                  "
                  [class.dark:text-amber-400]="
                    unmetPreferencesInGroup1().has(person.id)
                  "
                >
                  {{ person.preferredCompanions.join(", ") || "None" }}
                </span>
              </p>
            </div>
            }
          </div>
        </div>

        <!-- Group 2 -->
        <div
          class="bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border border-slate-200 dark:border-slate-700"
        >
          <h3
            class="text-xl font-bold mb-4 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-600 dark:text-slate-300"
          >
            Grup 2 ({{ group2().length }})
          </h3>
          <div
            class="space-y-3 min-h-[100px] rounded-lg transition-colors duration-300"
          >
            @for (person of group2(); track person.id; let i = $index) {
            <div
              class="p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700 cursor-grab"
            >
              <div class="flex justify-between items-start">
                <p
                  class="font-semibold"
                  [class.text-blue-500]="person.sex === 'boy'"
                  [class.text-pink-500]="person.sex === 'girl'"
                >
                  {{ person.name }}
                </p>
                <div
                  class="flex items-center gap-2 text-slate-400 dark:text-slate-500"
                >
                  @if (person.isSpecial) {
                  <span
                    title="Has special needs"
                    class="w-5 h-5 flex items-center justify-center bg-yellow-100 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400 rounded-full text-xs font-bold"
                    >NEE</span
                  >
                  } @if (person.hasActitudinalProblems) {
                  <span
                    title="Has actitudinal problems"
                    class="w-5 h-5 flex items-center justify-center bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 rounded-full text-xs font-bold"
                    >PA</span
                  >
                  }
                </div>
              </div>
              <div
                class="flex items-center gap-2 mt-1 text-xs text-slate-500 dark:text-slate-400"
              >
                <span>Aprenentatge:</span>
                <div class="flex items-center gap-0.5">
                  @for (lvl of knowledgeLevels; track lvl) {
                  <div
                    class="w-2.5 h-2.5 rounded-full"
                    [class.bg-teal-400]="lvl <= person.knowledgeLevel"
                    [class.bg-slate-300]="lvl > person.knowledgeLevel"
                    [class.dark:bg-teal-600]="lvl <= person.knowledgeLevel"
                    [class.dark:bg-slate-600]="lvl > person.knowledgeLevel"
                  ></div>
                  }
                </div>
              </div>
              <p
                class="text-xs text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-1.5"
              >
                @if (unmetPreferencesInGroup2().has(person.id)) {
                <svg
                  class="w-4 h-4 text-amber-500 flex-shrink-0"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-amber-600 dark:text-amber-400"
                  >Companys:</span
                >
                } @else {
                <span>Companys:</span>
                }
                <span
                  class="font-medium text-slate-600 dark:text-slate-300"
                  [class.text-amber-600]="
                    unmetPreferencesInGroup2().has(person.id)
                  "
                  [class.dark:text-amber-400]="
                    unmetPreferencesInGroup2().has(person.id)
                  "
                >
                  {{ person.preferredCompanions.join(", ") || "None" }}
                </span>
              </p>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    }
  </main>
</div>
